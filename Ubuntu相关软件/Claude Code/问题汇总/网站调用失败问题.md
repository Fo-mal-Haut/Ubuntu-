**问题描述**：当我需要claude code调用网站内容的时候，就会出现报错：`Error: Claude Code is unable to fetch from ...`

**参考文档**：[【已解决】Claude Code WebFetch 调用失败问题 - skipWebFetchPreflight 配置](https://linux.do/t/topic/1148954)

# 原因分析

翻了下 GitHub，在 [Issue #6388](https://github.com/anthropics/claude-code/issues/6388) 找到了根本原因：

WebFetch 在抓取目标网站之前，会先调用 `https://claude.ai/api/web/domain_info?domain=` 做安全验证。如果你的网络环境下 `claude.ai` 被墙或者被企业防火墙拦了，这个预检查就会失败，即使目标网站本身是可以访问的。

所以就算开了全局代理，如果代理没有正确处理 `claude.ai` 的请求，WebFetch 还是会报错。

# 解决方案

Claude Code 其实提供了一个配置项 `skipWebFetchPreflight` 可以跳过预检查，但是官方文档里没写（坑）。

## 配置步骤

1. 编辑 `settings.json`
    
    `vim ~/.claude/settings.json`
    
    添加这一行：
    
    `{   "skipWebFetchPreflight": true }`
    
2. 重启 Claude Code生效